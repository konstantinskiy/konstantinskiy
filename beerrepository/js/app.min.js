$(document).ready(function(){document.getElementById("random");function e(e=1,i=10){let n=document.getElementsByClassName("beer-grid")[0];n.innerHTML="";let a="";fetch(`https://api.punkapi.com/v2/beers?page=${e}&per_page=${i}`).then(function(e){200===e.status?e.json().then(function(e){e.forEach(function(i,t){let s=e[t].description.slice(0,120)+"...",d=i.food_pairing,l="";d.forEach(function(e,i){l+=e+", "}),l=l.slice(0,-2),a=`<div class="beer-grid__col">\n                            <div class="beer-item">\n                                <div class="beer-item__inner">\n                                    <div class="beer-item__head">\n                                        <div class="beer-item__img">\n                                            <a href="${i.image_url}" data-fancybox><img src="${i.image_url}"></a>\n                                        </div>\n                                        <div class="beer-item__title"><span>${i.name}</span></div>\n                                        <div class="beer-item__tagline">${i.tagline}</div>\n                                        <div class="beer-item__description">${s}</div>\n                                    </div>\n                                    <div class="beer-item__line">\n                                        <div class="beer-item__linekey">Количество алкоголя:</div>\n                                        <div class="beer-item__linevalue">${i.abv} %</div>\n                                    </div>\n                                    <div class="beer-item__footer">\n                                        <div class="beer-item__footercol">\n                                            <a\n                                                href="#"\n                                                data-modal-id="beer-modal"\n                                                data-beer-id="${i.id}"\n                                                class="beer-item__details js-beer-modal"\n                                                data-fancybox-modal>Детали\n                                            </a>\n                                        </div>\n                                        <div class="beer-item__footercol">\n                                            <a\n                                                href="#"\n                                                data-modal-id="order-modal"\n                                                data-beer-title="${i.name}"\n                                                data-beer-img="${i.image_url}"\n                                                class="beer-item__order js-beer-modal"\n                                                data-fancybox-modal>Заказать\n                                            </a>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>`,n.innerHTML+=a})}):console.log("Error: "+e.status)})}e(1,10),$(".js-sort-items").on("change",function(i){i.preventDefault();let n=$(this).val();e($(".js-sort-page").val(),n)}),$(".js-sort-page").on("change",function(i){i.preventDefault();let n=$(".js-sort-items").val();e($(this).val(),n)}),$(document).on("click",".js-beer-modal",function(e){e.preventDefault();let i=$(this).data("modal-id"),n=$(this).data("beer-id"),a=$(this).data("beer-title"),t=$(this).data("beer-img");var s;"beer-modal"==i?(s=n)&&fetch(`https://api.punkapi.com/v2/beers/${s}`).then(function(e){200===e.status?e.json().then(function(e){e.forEach(function(i,n){let a=e[n].food_pairing,t="";a.forEach(function(e,i){t+=e+", "}),t=t.slice(0,-2);let s=`\n                            <div class="beer-item__head">\n                                <div class="beer-item__img">\n                                    <a href="${e[n].image_url}" data-fancybox-img><img src="${e[n].image_url}"></a>\n                                </div>\n                                <div class="beer-item__title"><span>${e[n].name}</span></div>\n                                <div class="beer-item__tagline">${e[n].tagline}</div>\n                                <div class="beer-item__description">${e[n].description}</div>\n                            </div>\n                            <div class="beer-item__line">\n                                <div class="beer-item__linekey">Сварено в:</div>\n                                <div class="beer-item__linevalue">${e[n].first_brewed}</div>\n                            </div>\n                            <div class="beer-item__line">\n                                <div class="beer-item__linekey">Количество алкоголя:</div>\n                                <div class="beer-item__linevalue">${e[n].abv} %</div>\n                            </div>\n                            <div class="beer-item__line">\n                                <div class="beer-item__linekey">Хорошо сочетается с:</div>\n                                <div class="beer-item__linevalue">${t}</div>\n                            </div>`;$("#beer-modal").append(s)})}):console.log("Error: "+e.status)}):"order-modal"==i&&function(e,i){let n=`\n            <div class="beer-item__title">Заказать - <span>${e}</span></div>\n            <div class="beer-item__img">\n                <img src="${i}" alt="${e}">\n            </div>`;$(".order-modal-content").append(n)}(a,t),$.fancybox.open({src:"#"+i,opts:{trapFocus:!0,autoFocus:!1,touch:!1,beforeShow:function(){$("html").addClass("scroll-disable")},afterClose:function(){$("#beer-modal").empty(),$(".order-modal-content").empty(),$("html").removeClass("scroll-disable")}}})})});