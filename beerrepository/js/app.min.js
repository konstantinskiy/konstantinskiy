$(document).ready(function(){function e(e=1,i=10){let n=document.getElementsByClassName("beer-grid")[0];n.innerHTML="";let a="";fetch(`https://api.punkapi.com/v2/beers?page=${e}&per_page=${i}`).then(function(e){200===e.status?e.json().then(function(e){e.forEach(function(i,t){let s=e[t].description.slice(0,120)+"...",d=i.food_pairing,l="";d.forEach(function(e,i){l+=e+", "}),l=l.slice(0,-2),a=`<div class="beer-grid__col">\n                            <div class="beer-item">\n                                <div class="beer-item__inner">\n                                    <div class="beer-item__head">\n                                        <div class="beer-item__img">\n                                            <a href="${i.image_url}" data-fancybox><img src="${i.image_url}"></a>\n                                        </div>\n                                        <div class="beer-item__title"><span>${i.name}</span></div>\n                                        <div class="beer-item__tagline">${i.tagline}</div>\n                                        <div class="beer-item__description">${s}</div>\n                                    </div>\n                                    <div class="beer-item__line">\n                                        <div class="beer-item__linekey">Количество алкоголя:</div>\n                                        <div class="beer-item__linevalue">${i.abv} %</div>\n                                    </div>\n                                    <div class="beer-item__footer">\n                                        <div class="beer-item__footercol">\n                                            <a\n                                                href="#"\n                                                data-modal-id="beer-modal"\n                                                data-modal-for="beer-modal"\n                                                data-beer-id="${i.id}"\n                                                class="beer-item__details js-beer-modal"\n                                                data-fancybox-modal>Детали\n                                            </a>\n                                        </div>\n                                        <div class="beer-item__footercol">\n                                            <a\n                                                href="#"\n                                                data-modal-id="order-modal"\n                                                data-modal-for="order-modal"\n                                                data-beer-title="${i.name}"\n                                                data-beer-img="${i.image_url}"\n                                                class="beer-item__order js-beer-modal"\n                                                data-fancybox-modal>Заказать\n                                            </a>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>`,n.innerHTML+=a})}):console.log("Error: "+e.status)})}e(1,10),$(".js-sort-items").on("change",function(i){i.preventDefault();let n=$(this).val();e($(".js-sort-page").val(),n)}),$(".js-sort-page").on("change",function(i){i.preventDefault();let n=$(".js-sort-items").val();e($(this).val(),n)}),$(document).on("click",".js-beer-modal",function(e){e.preventDefault();let i=$(this).data("modal-id"),n=$(this).data("modal-for"),a=$(this).data("beer-id"),t=$(this).data("beer-title"),s=$(this).data("beer-img");var d;"beer-modal"==n?(d=a)&&fetch(`https://api.punkapi.com/v2/beers/${d}`).then(function(e){200===e.status?e.json().then(function(e){console.log(e),e.forEach(function(i,n){let a=e[n].food_pairing,t="";a.forEach(function(e,i){t+=e+", "}),t=t.slice(0,-2),$(".beer-modal__content").empty();let s=`\n                            <div class="beer-item__head">\n                                <div class="beer-item__img">\n                                    <img src="${i.image_url}" alt="${i.name}">\n                                </div>\n                                <div class="beer-item__title"><span>${i.name}</span></div>\n                                <div class="beer-item__tagline">${i.tagline}</div>\n                                <div class="beer-item__description">${i.description}</div>\n                            </div>\n                            <div class="beer-item__line">\n                                <div class="beer-item__linekey">Сварено в:</div>\n                                <div class="beer-item__linevalue">${i.first_brewed}</div>\n                            </div>\n                            <div class="beer-item__line">\n                                <div class="beer-item__linekey">Количество алкоголя:</div>\n                                <div class="beer-item__linevalue">${i.abv} %</div>\n                            </div>\n                            <div class="beer-item__line">\n                                <div class="beer-item__linekey">Хорошо сочетается с:</div>\n                                <div class="beer-item__linevalue">${t}</div>\n                            </div>`;$(".beer-modal__content").append(s)})}):console.log("Error: "+e.status)}):"order-modal"==n?function(e,i){$(".order-modal-content").empty();let n=`\n            <div class="beer-item__title">Заказать - <span>${e}</span></div>\n            <div class="beer-item__img">\n                <img src="${i}" alt="${e}">\n            </div>`;$(".order-modal-content").append(n)}(t,s):"random-modal"==n&&fetch("https://api.punkapi.com/v2/beers/random").then(function(e){200===e.status?e.json().then(function(e){let i=e[0],n=i.food_pairing,a="";n.forEach(function(e,i){a+=e+", "}),a=a.slice(0,-2),$(".beer-modal__content").empty();let t=`\n                            <div class="beer-item__head">\n                                <div class="beer-item__img">\n                                    <img src="${i.image_url}" alt="${i.name}">\n                                </div>\n                                <div class="beer-item__title"><span>${i.name}</span></div>\n                                <div class="beer-item__tagline">${i.tagline}</div>\n                                <div class="beer-item__description">${i.description}</div>\n                            </div>\n                            <div class="beer-item__line">\n                                <div class="beer-item__linekey">Сварено в:</div>\n                                <div class="beer-item__linevalue">${i.first_brewed}</div>\n                            </div>\n                            <div class="beer-item__line">\n                                <div class="beer-item__linekey">Количество алкоголя:</div>\n                                <div class="beer-item__linevalue">${i.abv} %</div>\n                            </div>\n                            <div class="beer-item__line">\n                                <div class="beer-item__linekey">Хорошо сочетается с:</div>\n                                <div class="beer-item__linevalue">${a}</div>\n                            </div>`;$(".beer-modal__content").append(t)}):console.log("Error: "+e.status)}),$.fancybox.open({src:"#"+i,opts:{trapFocus:!0,autoFocus:!1,touch:!1,beforeShow:function(){$("html").addClass("scroll-disable")},afterClose:function(){$("html").removeClass("scroll-disable")}}})})});